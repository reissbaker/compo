require=function t(e,n,i){function r(s,c){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(o)return o(s,!0);var u=Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=n[s]={exports:{}};e[s][0].call(h.exports,function(t){var n=e[s][1][t];return r(n?n:t)},h,h.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e){"use strict";var n=function(){function t(){}return t}();e.exports=n},{}],2:[function(t,e){"use strict";function n(t,e,i,r,o){e.forEach(function(e){e.detachAllFrom(t)}),delete i[t.id],delete o[t.id];var s=r[t.id];s&&(s.forEach(function(t){n(t,e,i,r,o)}),delete r[t.id])}var i=t("./util"),r=t("./table"),o=t("./entity"),s=function(){function t(){this._guid=0,this._alive={},this._children={},this._parents={},this._tables=[]}return t.prototype.table=function(){var t=new r;return this._tables.push(t),t},t.prototype.drop=function(t){return i.remove(this._tables,t),t},t.prototype.entity=function(t){void 0===t&&(t=null);var e=this._guid++,n=new o(this,e);if(this._alive[e]=!0,null!=t&&this._alive[t.id]){var i=this._children[t.id]=this._children[t.id]||[];i.push(n),this._parents[e]=t}return n},t.prototype.destroy=function(t){if(this._alive[t.id]){var e=this._parents[t.id];if(n(t,this._tables,this._alive,this._children,this._parents),e){var r=this._children[e.id];i.remove(r,t),0===r.length&&delete this._children[e.id]}return t}},t.prototype.compact=function(){i.each(this._tables,function(t){t.compact()})},t.prototype.reset=function(){this._alive={},this._children={},this._parents={},i.each(this._tables,function(t){t.reset()}),this._tables=[]},t.prototype.getChildren=function(t){return this._children[t.id]},t.prototype.getParent=function(t){return this._parents[t.id]},t.prototype.isAlive=function(t){return!!this._alive[t.id]},t}();e.exports=s},{"./entity":4,"./table":9,"./util":10}],3:[function(t,e){"use strict";var n=function(){function t(t){this.kernel=t}return t}();e.exports=n},{}],4:[function(t,e){var n=function(){function t(t,e){this._db=t,this.id=e}return t.prototype.entity=function(){return this._db.entity(this)},t.prototype.destroy=function(){return this._db.destroy(this)},t.prototype.getParent=function(){return this._db.getParent(this)},t.prototype.getChildren=function(){return this._db.getChildren(this)},t.prototype.isAlive=function(){return this._db.isAlive(this)},t}();e.exports=n},{}],5:[function(t,e,n){"use strict";var i=t("./util"),r=function(){function t(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];this._handlers={},i.each(e,function(e){t._handlers[e]=[]})}return t.prototype.on=function(t,e){this._handlers[t]||(this._handlers[t]=[]),this._handlers[t].push(e)},t.prototype.off=function(t,e){this._handlers[t]&&i.remove(this._handlers[t],e)},t.prototype.trigger=function(t,e){this._handlers[t]&&i.each(this._handlers[t],function(t){t(e)})},t}();n.Emitter=r},{"./util":10}],6:[function(t,e){"use strict";var n=t("./util"),i=t("./database"),r=function(){function t(){this.db=new i,this._systems=[],this._root=this.db.entity(),this._callbacks=[]}return t.prototype.attach=function(t){this._systems.push(t),t.onAttach(this.db)},t.prototype.detach=function(t){n.remove(this._systems,t),t.onDetach(this.db)},t.prototype.tick=function(t){for(;this._callbacks.length>0;)this._callbacks.pop()();n.each(this._systems,function(e){e.before(t)}),n.each(this._systems,function(e){e.update(t)}),n.backwards(this._systems,function(e){e.after(t)}),this.db.compact()},t.prototype.nextTick=function(t){this._callbacks.push(t)},t.prototype.render=function(t){n.each(this._systems,function(e){e.render(t)})},t.prototype.root=function(){return this._root},t.prototype.resetRoot=function(){this._root.destroy(),this._root=this.db.entity()},t.prototype.reset=function(){var t=this;this.resetRoot(),this._systems.forEach(function(e){e.onDetach(t.db)}),this._systems=[]},t}();e.exports=r},{"./database":2,"./util":10}],7:[function(t,e){"use strict";function n(t){setTimeout(t,a)}function i(t){function e(){if(!t._stopped){var n=(new Date).valueOf();t._emitter.trigger(p.BEGIN_EVENT,null),r(t,n-t._prevTime),t._emitter.trigger(p.END_EVENT,null),t._prevTime=n,h(e)}}return e}function r(t,e){var n=0,i=t._tickLength;for(t._elapsed+=Math.min(e,i*u);t._elapsed>i;)t._kernel.tick(i),t._elapsed-=i,n+=i;n>0&&t._kernel.render(n)}var o=t("./events"),s=o.Emitter,c=60,a=1e3/c,u=5,h=window.requestAnimationFrame||n,p=function(){function t(e,n){this._stopped=!1,this._emitter=new s(t.BEGIN_EVENT,t.END_EVENT),this._elapsed=0,this._kernel=e,this._tickLength=1e3/n}return t.prototype.start=function(){this._stopped=!1,this._prevTime=(new Date).valueOf(),h(i(this))},t.prototype.stop=function(){this._stopped=!0},t.prototype.on=function(t,e){this._emitter.on(t,e)},t.prototype.off=function(t,e){this._emitter.off(t,e)},t.BEGIN_EVENT="beginFrame",t.END_EVENT="endFrame",t}();e.exports=p},{"./events":5}],8:[function(t,e){"use strict";var n=function(){function t(){}return t.prototype.onAttach=function(){},t.prototype.onDetach=function(){},t.prototype.before=function(){},t.prototype.update=function(){},t.prototype.after=function(){},t.prototype.render=function(){},t}();e.exports=n},{}],9:[function(t,e){"use strict";var n=t("./events"),i=n.Emitter,r=t("./util"),o="attach",s="detach",c=function(){function t(){this._attached=[],this._primaryIdx={},this._emitter=new i(o,s),this._detached=[]}return t.prototype.attach=function(t,e){e.entity=t,this._attached.push(e);var n=this._primaryIdx[t.id]=this._primaryIdx[t.id]||[];return n.push(e),this._emitter.trigger(o,e),e},t.prototype.detach=function(t,e){var n=this._primaryIdx[t.id];if(n)return this._emitter.trigger(s,e),this._detached.push(t),r.nullify(this._attached,e),r.nullify(n,e),e},t.prototype.detachAllFrom=function(t){var e=this,n=this._primaryIdx[t.id];if(n){r.each(n,function(t){e._emitter.trigger(s,t)}),r.each(n,function(t){r.nullify(e._attached,t)});for(var i=0,o=n.length;o>i;i++)n[i]=null;return delete this._primaryIdx[t.id],n}},t.prototype.compact=function(){for(var t;t=this._detached.pop();){var e=this._primaryIdx[t.id];r.compact(e),0===e.length&&delete this._primaryIdx[t.id]}r.compact(this._attached)},t.prototype.on=function(t,e){this._emitter.on(t,e)},t.prototype.off=function(t,e){this._emitter.off(t,e)},t.prototype.reset=function(){this._emitter=new i(o,s),this._attached=[],this._primaryIdx={},this._detached=[]},t.prototype.attached=function(t){r.safeEach(this._attached,t)},t.prototype.components=function(t,e){var n=this._primaryIdx[t.id];n&&r.safeEach(n,e)},t.prototype.getAttached=function(){return this._attached},t.prototype.getComponents=function(t){return this._primaryIdx[t.id]},t}();e.exports=c},{"./events":5,"./util":10}],10:[function(t,e,n){"use strict";function i(t,e){for(var n=t.length-1;n>=0;n--)e(t[n])}function r(t,e){for(var n=0,i=t.length;i>n;n++)e(t[n])}function o(t,e){for(var n=0,i=t.length;i>n;n++){var r=t[n];null!=r&&e(r)}}function s(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return void t.splice(n,1)}function c(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return void(t[n]=null)}function a(t){for(var e=-1,n=0,i=!1,r=0,o=t.length;o>r;r++)null==t[r]?i||(i=!0,e=r):i&&(n=r-e,t.splice(e,n),r-=n,o-=n,i=!1);i&&t.splice(e,r-e)}function u(t,e){var n=function(){};return n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e}n.backwards=i,n.each=r,n.safeEach=o,n.remove=s,n.nullify=c,n.compact=a,n.extend=u},{}],11:[function(t,e){"use strict";var n=t("./core/component"),i=t("./core/table"),r=t("./core/database"),o=t("./core/kernel"),s=t("./core/system"),c=t("./plugin/behavior-system"),a=t("./plugin/behavior"),u=t("./core/util"),h=u.extend,p=t("./core/runner"),f=t("./core/engine"),d=t("./state/state"),_=t("./state/state-machine"),l=t("./core/events"),y={Component:n,Table:i,Database:r,System:s,Kernel:o,BehaviorSystem:c,Behavior:a,extend:h,Runner:p,Engine:f,StateMachine:_,State:d,Emitter:l.Emitter};e.exports=y},{"./core/component":1,"./core/database":2,"./core/engine":3,"./core/events":5,"./core/kernel":6,"./core/runner":7,"./core/system":8,"./core/table":9,"./core/util":10,"./plugin/behavior":13,"./plugin/behavior-system":12,"./state/state":15,"./state/state-machine":14}],12:[function(t,e){"use strict";var n=this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},i=t("../core/system"),r=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.onAttach=function(t){this.table=t.table()},e.prototype.onDetach=function(t){t.drop(this.table)},e.prototype.update=function(t){this.table.attached(function(e){e.update(t)})},e}(i);e.exports=r},{"../core/system":8}],13:[function(t,e){"use strict";var n=this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},i=t("../core/component"),r=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.update=function(){},e}(i);e.exports=r},{"../core/component":1}],14:[function(t,e){"use strict";var n=function(){function t(t){this._state=null,this._map=t;for(var e in t)t.hasOwnProperty(e)&&t[e].attach(this)}return t.prototype.begin=function(){this._state.begin()},t.prototype.update=function(t){this._state.update(t)},t.prototype.end=function(){this._state.end()},t.prototype.state=function(t){return this._map[t]},t.prototype.currentState=function(){return this._state},t.prototype.setState=function(t){return this._state&&this._state.end(),this._state=this._map[t],this._state.begin(),this._state},t}();e.exports=n},{}],15:[function(t,e){"use strict";var n=function(){function t(){}return t.prototype.attach=function(t){this._machine=t},t.prototype.begin=function(){},t.prototype.update=function(){},t.prototype.end=function(){},t.prototype.transition=function(t){return this._machine.setState(t)},t}();e.exports=n},{}]},{},[11]);